<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Public Group • v1.7</title>

<style>
:root{
  --bg:#121212;
  --box:#1c1c1c;
  --text:#e5e5e5;
  --muted:#bdbdbd;
  --border:#2a2a2a;
  --radius:10px;
}

*{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto;}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  transition:background .4s,color .4s;
}

/* top gradient line */
.top-line{
  position:fixed;
  top:0;left:0;
  height:3px;
  width:100%;
  background:linear-gradient(90deg,#aaa,#fff,#aaa);
  background-size:200% 100%;
  animation:move 8s linear infinite;
  opacity:.4;
}

@keyframes move{
  from{background-position:0%}
  to{background-position:200%}
}

.container{
  width:92%;
  max-width:420px;
  background:var(--box);
  border-radius:14px;
  padding:22px;
  border:1px solid var(--border);
}

h1{
  margin:0 0 14px;
  font-size:18px;
  font-weight:600;
}

.box{
  background:#181818;
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:12px;
  margin-bottom:12px;
  transition:.3s;
}

input{
  width:100%;
  background:transparent;
  border:none;
  outline:none;
  color:var(--text);
  font-size:14px;
}

input::placeholder{color:#9a9a9a}

.box:focus-within{
  border-color:#888;
  box-shadow:0 0 0 1px rgba(255,255,255,.15);
}

button{
  width:100%;
  padding:10px;
  background:transparent;
  border:1px solid #3a3a3a;
  color:var(--text);
  border-radius:var(--radius);
  cursor:pointer;
  transition:.25s;
}

button:hover{
  border-color:#aaa;
}

.row{
  display:flex;
  gap:10px;
}

.footer{
  position:fixed;
  bottom:12px;
  left:12px;
  font-size:11px;
  color:#888;
}

.credit{
  position:fixed;
  bottom:12px;
  right:12px;
  font-size:11px;
  color:#888;
}
</style>
</head>

<body>
<div class="top-line"></div>

<div class="container">
  <h1>Create / Join Group</h1>

  <div class="box">
    <input id="username" placeholder="Your name">
  </div>

  <div class="box">
    <input id="groupName" placeholder="Group name (create)">
  </div>

  <button onclick="createGroup()">Create Group</button>

  <br><br>

  <div class="box">
    <input id="joinCode" placeholder="6-digit group code">
  </div>

  <button onclick="joinGroup()">Join Group</button>
</div>

<div class="footer">Version – P.V1.7 (Developing)</div>
<div class="credit">© Oxford</div>

<script>
function saveUser(name){
  localStorage.setItem("pg_username",name);
}

function getUser(){
  return localStorage.getItem("pg_username");
}

document.getElementById("username").value = getUser() || "";

function genCode(){
  return Math.floor(100000 + Math.random()*900000).toString();
}

function createGroup(){
  const name = username.value.trim();
  const gname = groupName.value.trim();
  if(!name || !gname) return alert("Fill all fields");

  saveUser(name);

  const code = genCode();
  const group = {
    name:gname,
    host:name,
    members:[name]
  };

  localStorage.setItem("group_"+code,JSON.stringify(group));
  location.href = "group.html?code="+code;
}

function joinGroup(){
  const name = username.value.trim();
  const code = joinCode.value.trim();
  if(!name || code.length!==6) return alert("Invalid");

  saveUser(name);

  const data = localStorage.getItem("group_"+code);
  if(!data) return alert("Group not found");

  const group = JSON.parse(data);
  if(!group.members.includes(name)){
    group.members.push(name);
    localStorage.setItem("group_"+code,JSON.stringify(group));
  }

  location.href="group.html?code="+code;
}
</script>
</body>
</html>
