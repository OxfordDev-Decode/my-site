<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Folder</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
body{
  margin:0;
  font-family:Inter,sans-serif;
  background:var(--bg);
  color:var(--text);
  transition:.4s;
}
:root{
  --bg:#121212;
  --panel:#1c1c1c;
  --text:#eee;
  --line:#555;
}
.light{
  --bg:#f5f5f5;
  --panel:#fff;
  --text:#111;
  --line:#bbb;
}

.top{
  padding:14px;
  border-bottom:1px solid var(--line);
}

.editor{
  padding:14px;
}
textarea{
  width:100%;
  height:200px;
  background:var(--panel);
  color:var(--text);
  border:none;
  border-radius:10px;
  padding:12px;
}

.buttons{
  display:flex;
  gap:10px;
  margin-top:10px;
}
button{
  flex:1;
  padding:10px;
  border:none;
  border-radius:8px;
  background:var(--panel);
  color:var(--text);
}

.preview{
  padding:14px;
  border-top:1px solid var(--line);
}
</style>
</head>

<body>
<div class="top">
  <button onclick="back()">‚Üê Back</button>
</div>

<div class="editor">
  <textarea id="text"></textarea>
  <div class="buttons">
    <button onclick="save()">Save</button>
    <button onclick="discard()">Discard</button>
  </div>
</div>

<div class="preview" id="preview"></div>

<script>
document.body.className=localStorage.getItem("theme")||"";
const id=new URLSearchParams(location.search).get("id");
let folders=JSON.parse(localStorage.getItem("folders"));
const area=document.getElementById("text");
area.value=folders[id].content;
preview.innerHTML=marked.parse(area.value);

area.oninput=()=>preview.innerHTML=marked.parse(area.value);

function save(){
  folders[id].content=area.value;
  localStorage.setItem("folders",JSON.stringify(folders));
  history.back();
}
function discard(){history.back();}
function back(){history.back();}
</script>
</body>
</html>
